<!DOCTYPE HTML>
<html>
<head>
  <title><%= title %></title>
  <script src="/javascripts/vis.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link href="/stylesheets/vis.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript">
    // ... load a visualization
    function loadApps() {
        $.ajax( {url: '/api/apps', success : function (result) {
            data = JSON.parse(result);
            $('select').empty();
            $('select').append("<option>Select one</option>");
            for( app of data) {
                $('select').append("<option value='"+ app.id + "'>" + app.name + "</option>");
            }
        }});
    }

    function loadDot( appid) {
        $.ajax({url: "/api/apps/"+ appid.value, success: function(result) {
            var container = document.getElementById('visualization');
            //data = vis.network.dotparser.DOTToGraph(result);
            //console.log(JSON.stringify(data));
            var options = {width: "100%", height: "800"}
            var network = new vis.Network( container, result, options);
        }});
    }
  </script>

</head>
<body onload="loadApps();">
  <p>Applications : 
  <select onchange="loadDot(this)"><option>Application is loading ... Wait...</option></select>
  </p>
  <div id="visualization" height="100%" width="100%"></div>
</body>
</html>